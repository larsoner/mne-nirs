<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>SNIRF Support in MNE &#8212; MNE-NIRS 0.0.1 dev documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap_divs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-dataframe.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/bootstrap_divs.js"></script>
    <script src="../_static/js/copybutton.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          MNE-NIRS</a>
        <span class="navbar-text navbar-version pull-left"><b>0.0.1 dev</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="index.html">Examples</a></li>
                <li><a href="../api.html">API</a></li>
                <li><a href="https://github.com/mne-tools/mne-nirs">GitHub</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">SNIRF Support in MNE</a><ul>
<li><a class="reference internal" href="#import-raw-nirs-data-from-vendor">Import raw NIRS data from vendor</a></li>
<li><a class="reference internal" href="#write-data-as-snirf">Write data as SNIRF</a></li>
<li><a class="reference internal" href="#read-back-snirf-file">Read back SNIRF file</a></li>
<li><a class="reference internal" href="#compare-files">Compare files</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-examples-plot-90-snirf-py"><span class="std std-ref">here</span></a>     to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="snirf-support-in-mne">
<span id="tut-fnirs-snirf"></span><span id="sphx-glr-auto-examples-plot-90-snirf-py"></span><h1>SNIRF Support in MNE<a class="headerlink" href="#snirf-support-in-mne" title="Permalink to this headline">¶</a></h1>
<div class="sidebar">
<p class="sidebar-title">.nirs files</p>
<p>If you wish to process your .nirs files in MNE use the official snirf
converter to create .snirf file.
See <a class="reference external" href="https://github.com/fNIRS/snirf_homer3">https://github.com/fNIRS/snirf_homer3</a></p>
</div>
<p>SNIRF is a file format for storing NIRS data. The specification is maintained
by the society for functional near infrared spectroscopy. In this tutorial
we demonstrate how to convert your MNE data to SNIRF and also how to read
SNIRF files.</p>
<p>Read the SNIRF protocol over at <a class="reference external" href="https://github.com/fNIRS/snirf">https://github.com/fNIRS/snirf</a></p>
<div class="contents local topic" id="page-contents">
<p class="topic-title">Page contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#import-raw-nirs-data-from-vendor" id="id1">Import raw NIRS data from vendor</a></p></li>
<li><p><a class="reference internal" href="#write-data-as-snirf" id="id2">Write data as SNIRF</a></p></li>
<li><p><a class="reference internal" href="#read-back-snirf-file" id="id3">Read back SNIRF file</a></p></li>
<li><p><a class="reference internal" href="#compare-files" id="id4">Compare files</a></p></li>
</ul>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Authors: Robert Luke &lt;mail@robertluke.net&gt;</span>
<span class="c1">#</span>
<span class="c1"># License: BSD (3-clause)</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">mne</span>

<span class="kn">from</span> <span class="nn">mne.io</span> <span class="kn">import</span> <a href="https://mne.tools/stable/generated/mne.io.read_raw_nirx.html#mne.io.read_raw_nirx" title="mne.io.read_raw_nirx" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-function"><span class="n">read_raw_nirx</span></a><span class="p">,</span> <span class="n">read_raw_snirf</span>
<span class="kn">from</span> <span class="nn">mne_nirs.io</span> <span class="kn">import</span> <span class="n">write_raw_snirf</span>
<span class="kn">from</span> <span class="nn">numpy.testing</span> <span class="kn">import</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.testing.assert_allclose.html#numpy.testing.assert_allclose" title="numpy.testing.assert_allclose" class="sphx-glr-backref-module-numpy-testing sphx-glr-backref-type-py-function"><span class="n">assert_allclose</span></a>
</pre></div>
</div>
<div class="section" id="import-raw-nirs-data-from-vendor">
<h2><a class="toc-backref" href="#id1">Import raw NIRS data from vendor</a><a class="headerlink" href="#import-raw-nirs-data-from-vendor" title="Permalink to this headline">¶</a></h2>
<p>First we import some example data recorded with a NIRX device.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fnirs_data_folder</span></a> <span class="o">=</span> <a href="https://mne.tools/stable/generated/mne.datasets.fnirs_motor.data_path.html#mne.datasets.fnirs_motor.data_path" title="mne.datasets.fnirs_motor.data_path" class="sphx-glr-backref-module-mne-datasets-fnirs_motor sphx-glr-backref-type-py-function"><span class="n">mne</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">fnirs_motor</span><span class="o">.</span><span class="n">data_path</span></a><span class="p">()</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fnirs_raw_dir</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="os.path.join" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fnirs_data_folder</span></a><span class="p">,</span> <span class="s1">&#39;Participant-1&#39;</span><span class="p">)</span>
<span class="n">raw_intensity</span> <span class="o">=</span> <a href="https://mne.tools/stable/generated/mne.io.read_raw_nirx.html#mne.io.read_raw_nirx" title="mne.io.read_raw_nirx" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-function"><span class="n">read_raw_nirx</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fnirs_raw_dir</span></a><span class="p">)</span><span class="o">.</span><span class="n">load_data</span><span class="p">()</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Using default location ~/mne_data for fnirs_motor...
Creating ~/mne_data
Downloading archive MNE-fNIRS-motor-data.tgz to /github/home/mne_data
Downloading https://files.osf.io/v1/resources/rxvq7/providers/osfstorage/5dbf84a9cfc96c000ec957eb?version=1&amp;action=download&amp;direct (17.1 MB)

  0%|          | Downloading : 0.00/17.1M [00:00&lt;?,        ?B/s]
  6%|5         | Downloading : 0.99M/17.1M [00:00&lt;00:00,    35.1MB/s]
  9%|8         | Downloading : 1.49M/17.1M [00:00&lt;00:00,    34.2MB/s]
 12%|#1        | Downloading : 1.99M/17.1M [00:00&lt;00:00,    33.0MB/s]
 15%|#4        | Downloading : 2.49M/17.1M [00:00&lt;00:00,    32.3MB/s]
 18%|#7        | Downloading : 2.99M/17.1M [00:00&lt;00:00,    31.5MB/s]
 20%|##        | Downloading : 3.49M/17.1M [00:00&lt;00:00,    30.6MB/s]
 23%|##3       | Downloading : 3.99M/17.1M [00:00&lt;00:00,    29.8MB/s]
 26%|##6       | Downloading : 4.49M/17.1M [00:00&lt;00:00,    29.0MB/s]
 29%|##9       | Downloading : 4.99M/17.1M [00:00&lt;00:00,    28.2MB/s]
 32%|###2      | Downloading : 5.49M/17.1M [00:00&lt;00:00,    27.7MB/s]
 35%|###5      | Downloading : 5.99M/17.1M [00:00&lt;00:00,    27.0MB/s]
 38%|###8      | Downloading : 6.49M/17.1M [00:00&lt;00:00,    26.5MB/s]
 41%|####1     | Downloading : 6.99M/17.1M [00:00&lt;00:00,    26.1MB/s]
 44%|####3     | Downloading : 7.49M/17.1M [00:00&lt;00:00,    25.6MB/s]
 47%|####6     | Downloading : 7.99M/17.1M [00:00&lt;00:00,    25.3MB/s]
 50%|####9     | Downloading : 8.49M/17.1M [00:00&lt;00:00,    24.7MB/s]
 53%|#####2    | Downloading : 8.99M/17.1M [00:00&lt;00:00,    24.3MB/s]
 56%|#####5    | Downloading : 9.49M/17.1M [00:00&lt;00:00,    24.3MB/s]
 59%|#####8    | Downloading : 9.99M/17.1M [00:00&lt;00:00,    24.2MB/s]
 62%|######1   | Downloading : 10.5M/17.1M [00:00&lt;00:00,    24.0MB/s]
 64%|######4   | Downloading : 11.0M/17.1M [00:00&lt;00:00,    23.7MB/s]
 67%|######7   | Downloading : 11.5M/17.1M [00:00&lt;00:00,    23.4MB/s]
 70%|#######   | Downloading : 12.0M/17.1M [00:00&lt;00:00,    23.3MB/s]
 73%|#######3  | Downloading : 12.5M/17.1M [00:00&lt;00:00,    23.1MB/s]
 76%|#######6  | Downloading : 13.0M/17.1M [00:00&lt;00:00,    23.1MB/s]
 79%|#######9  | Downloading : 13.5M/17.1M [00:00&lt;00:00,    23.0MB/s]
 82%|########2 | Downloading : 14.0M/17.1M [00:00&lt;00:00,    22.9MB/s]
 85%|########4 | Downloading : 14.5M/17.1M [00:00&lt;00:00,    22.8MB/s]
 88%|########7 | Downloading : 15.0M/17.1M [00:00&lt;00:00,    22.6MB/s]
 91%|######### | Downloading : 15.5M/17.1M [00:00&lt;00:00,    22.6MB/s]
 94%|#########3| Downloading : 16.0M/17.1M [00:00&lt;00:00,    22.0MB/s]
 97%|#########6| Downloading : 16.5M/17.1M [00:00&lt;00:00,    21.9MB/s]
100%|##########| Downloading : 17.1M/17.1M [00:00&lt;00:00,    22.3MB/s]
100%|##########| Downloading : 17.1M/17.1M [00:00&lt;00:00,    20.9MB/s]
Verifying hash c4935d19ddab35422a69f3326a01fef8.
Decompressing the archive: /github/home/mne_data/MNE-fNIRS-motor-data.tgz
(please be patient, this can take some time)
Successfully extracted to: [&#39;/github/home/mne_data/MNE-fNIRS-motor-data&#39;]
Attempting to create new mne-python configuration file:
/github/home/.mne/mne-python.json
Loading /github/home/mne_data/MNE-fNIRS-motor-data/Participant-1
Reading 0 ... 23238  =      0.000 ...  2974.464 secs...
</pre></div>
</div>
</div>
<div class="section" id="write-data-as-snirf">
<h2><a class="toc-backref" href="#id2">Write data as SNIRF</a><a class="headerlink" href="#write-data-as-snirf" title="Permalink to this headline">¶</a></h2>
<p>Now we can write this data back to disk in the SNIRF format.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">write_raw_snirf</span><span class="p">(</span><span class="n">raw_intensity</span><span class="p">,</span> <span class="s1">&#39;test_raw.snirf&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="read-back-snirf-file">
<h2><a class="toc-backref" href="#id3">Read back SNIRF file</a><a class="headerlink" href="#read-back-snirf-file" title="Permalink to this headline">¶</a></h2>
<p>Next we can read back the snirf file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">snirf_intensity</span> <span class="o">=</span> <span class="n">read_raw_snirf</span><span class="p">(</span><span class="s1">&#39;test_raw.snirf&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Loading test_raw.snirf
</pre></div>
</div>
</div>
<div class="section" id="compare-files">
<h2><a class="toc-backref" href="#id4">Compare files</a><a class="headerlink" href="#compare-files" title="Permalink to this headline">¶</a></h2>
<p>Finally we can compare the data of the original to the SNIRF format and
ensure that the values are the same.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://numpy.org/doc/stable/reference/generated/numpy.testing.assert_allclose.html#numpy.testing.assert_allclose" title="numpy.testing.assert_allclose" class="sphx-glr-backref-module-numpy-testing sphx-glr-backref-type-py-function"><span class="n">assert_allclose</span></a><span class="p">(</span><a href="https://mne.tools/stable/generated/mne.io.BaseRaw.html#mne.io.BaseRaw.get_data" title="mne.io.BaseRaw.get_data" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-method"><span class="n">raw_intensity</span><span class="o">.</span><span class="n">get_data</span></a><span class="p">(),</span> <a href="https://mne.tools/stable/generated/mne.io.BaseRaw.html#mne.io.BaseRaw.get_data" title="mne.io.BaseRaw.get_data" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-method"><span class="n">snirf_intensity</span><span class="o">.</span><span class="n">get_data</span></a><span class="p">())</span>
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  5.032 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-plot-90-snirf-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../_downloads/1b75961e853d1ca3ad615a3c73bb64f9/plot_90_snirf.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_90_snirf.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../_downloads/8a47fdc24ea87dffdcdd373f4f254219/plot_90_snirf.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_90_snirf.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2020, Robert Luke.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>